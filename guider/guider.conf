# Guider Configuration

'''
[ Threshold Description ]

- RESOURCE
    - cpu:       total, user, kernel, irq, iowait
    - gpu:       total
    - mem:       available, free, anon, file, slab, pgRclm, rss
    - gpumem     total, size
    - swap:      usagePer, swapOut
    - block:     iowait, read, write
    - storage:   usagePer, free, favail, readtime, writetime
    - net:       inbound, outbound, recv, trans
    - load:      1m, 5m, 15m
    - fd:        curFd, fdSize
    - sock:      UDP, TCP, TCPCON, UDS
    - file:      big, less, exist, none, bigCnt, lessCnt, eqCnt
    - task:      nrCtx, new, die, abnormal, abnormalCond, bigCnt, lessCnt, eqCnt
    - log:       DLT, kernel, journal, syslog, trace, logcat
    - func:      native, syscall, python, D-Bus, signal
    - psi:       cpu, memory, io
    - cgroup:    cpu, throttle, memory, read, write, cpuDelay, memDelay, ioDelay

- TARGET
    - SYSTEM:    system resources
    - TASK:      task resources (except for Guider)
    - DEVICE:    device resources
    - *NAME:     ID/NAME for specific tasks, devices, events
    - KERNEL:    kernel log
    - DLT:       DLT log
    - JOURNAL:   systemd journal log
    - SYSLOG:    syslog log
    - TRACE:     ftrace log
    - LOGCAT:    android log
    - SYSCALL:   syscall
    - NATIVE:    native function for C, C++, Rust, Go
    - PYTHON:    python function
    - DBUS:      D-Bus message
    - SIGNAL:    signal

- FIELD
    < common >
    - apply:     activation value (true/false)
    - perm:      permission requirement (root)
    - interval:  duration condition for event (tick)
    - type:      value type from interval data (avg/min/max)
    - taskmon:   monitoring status for tasks (true/false)
    - message:   event message (string)
    - explain:   description (string)
    - caution:   caution (string)
    - command:   command set for handling the started event
    - lcommand:  command set for handling the finished event
    - signal:    signal timer for command task (tick{:SIGNAL})
    - oneshot:   one-time event handling value (true/false)
    - refresh:   restart timer for items disabled by oneshot (tick)
    - goneshot:  global oneshot value (true/false)
    - skip:      global skip count value (tick)
    - lock:      global lock value to handle the event exclusively (true/false)
    - max:       maximum count value for event handling (tick)
    - before:    uptime condition for event handling
    - after:     uptime condition for event handling
    - rbefore:   runtime condition for event handling
    - rafter:    runtime condition for event handling

    < cpu >
    - total:     total CPU usage for system/process/thread (%)
    - user:      user CPU usage for system (%)
    - kernel:    kernel CPU usage for system (%)
    - irq:       irq CPU usage for system (%)
    - iowait:    iowait time for system (%)

    < gpu >
    - total:     total GPU usage for system (%)

    < mem >
    - available: available memory for system (MB/%)
    - free:      free memory for system (MB/%)
    - anon:      anonymous memory for system (MB/%)
    - file:      file cache for system (MB/%)
    - slab:      slab cache for system (MB/%)
    - pgRclmBg:  background reclaimed memory for system (PAGE)
    - pgRclmFg:  foreground reclaimed memory for system (PAGE)
    - rss:       Resident Set Size for process (MB/%)

    < gpumem >
    - total:     system RAM usage for GPU (MB/%)
    - size:      per-process RAM usage for GPU (MB/%)

    < swap >
    - usagePer:  swap usage for system (%)
    - swapOut:   swap-outed memory for process (MB)

    < block >
    - ioWait:    I/O wait time for system (%)
    - read:      read size for process
    - write:     write size for process

    < storage >
    - usagePer:  usage for system (%)
    - free:      free space (MB)
    - favail:    file number can be created
    - readtime:  read time (ms)
    - writetime: write time (ms)

    < net >
    - inbound:   RX size for system
    - outbound:  TX size for system
    - recv:      RX size for devices
    - trans:     TX size for devices

    < load >
    - load1m:    loadavg for 1 Min
    - load5m:    loadavg for 5 Min
    - load15m:   loadavg for 15 Min

    < fd >
    - curFd:     file handle number for system
    - fdSize:    file descriptor number for process

    < sock >
    - UDP:       UDP socket number for system
    - TCP:       TCP socket number for system
    - TCPCON:    TCP(ESTABLISHED) socket number for system
    - UDS:       UDS number for system

    < file >
    - big:       file size
    - less:      file size
    - exist:     file status (true/false)
    - none:      file status (true/false)
    - bigCnt:    file count in dir (including eq)
    - lessCnt:   file count in dir (including eq)
    - eqCnt:     file count in dir

    < task >
    - nrCtx:         context switching number for system/thread
    - new:           the number of created tasks
    - die:           the number of terminated tasks
    - abnormal:      the number of abnormal tasks
    - abnormalCond:  condition status of abnormal tasks (ex, D/t/X/Z)
    - bigCnt:        count of tasks (including same)
    - lessCnt:       count of tasks (including same)
    - eqCnt:         count of tasks

    < log >
    - filter:    log filter

    < func >
    - thread:    target filter
    - filter:    function filter
    - group:     process grouping status (true/false)
    - main:      target only main thread (true/false)

    < psi >
    - some-avg10:   delay average for 10 seconds for at least one task (%)
    - some-avg60:   delay average for 60 seconds for at least one task (%)
    - some-avg300:  delay average for 300 seconds for at least one task (%)
    - some-diff:    delay diff for at least one task (%)
    - full-avg10:   delay average for 10 seconds for all tasks simultaneously (%)
    - full-avg60:   delay average for 60 seconds for all tasks simultaneously (%)
    - full-avg300:  delay average for 300 seconds for all tasks simultaneously (%)
    - full-diff:    delay diff for all tasks simultaneously (%)

    < cgroup >
    - cpu:         total CPU usage of groups (%)
    - throttle:    total CPU throttle of groups (%)
    - memory:      total memory usage of groups (MB)
    - read:        total block read of groups (MB)
    - write:       total block write of groups (MB)
    - cpuDelay:    total cpu delay based on PSI(some) of groups (%)
    - memDelay:    total mem delay based on PSI(some) of groups (%)
    - ioDelay:     total io delay based on PSI(some) of groups (%)

- VARIABLE
    - EVTNAME:    event name
    - EVTTIME:    event time
    - EVTUTCTIME: event time (UTC)
    - EVTUPTIME:  event uptime
    - EVTPID:     task PID
    - SELFPID:    Guider PID
    - NUMRUN:     run number
    - NUMREP:     report number
    - PID:        task PID (for top command)
    - OUTPUT:     last output path

- COMMAND (embedded)
    - BUFFER{:SIZE}:            resize the monitoring buffer
    - CLEAR:                    clear the monitoring buffer
    - DISABLE{:RESOURCE}:       disable monitoring of the specific resource
    - ENABLE{:RESOURCE}:        enable monitoring of the specific resource
    - EXIT:                     terminate the Guider process
    - FILTER{:ITEM}:            set the task filter
    - INTERVAL{:SEC}:           change the monitoring interval
    - KILL:                     kill all child tasks
    - OUTPATH:                  change the output path
    - PAUSE{:SEC}:              pause all monitoring activities with buffer clear
    - RELOAD{:PATH}:            reload the threshold config
    - RESET:                    clear the monitoring stats
    - RESTART:                  restart the Guider process
    - SLEEP{:SEC}:              sleep for seconds
    - SAVE{:TICK@NAME#PATH}:    save the monitoring results to the file from the past to some time thereafter
                                buffer trim is applied if TIME value is lesser than 0
                                PATH can be multiple paths separated by + sign as input
    - SAVERAW{:TICK@NAME#PATH}: save the monitoring results composed only of raw data to the file from the past to some time thereafter
    - SAVEMIN{:TICK@NAME#PATH}: save the monitoring results composed only of minimal data to the file from the past to some time thereafter
                                buffer trim is applied if TIME value is lesser than 0
                                PATH can be multiple paths separated by + sign as input
    - SAVECPU:                  save total cpu usages
    - SAVEMEM:                  save memory usages
    - SAVEMEMPROC:              save memory usages with smaps info
    - SAVEBLOCK:                save block times
    - SAVEPID:                  save PIDs
    - SAVERUNTIME:              save runtimes
    - SAVEPRIO:                 save priorities
    - SAVESWAP:                 save swap usages
    - STOP:                     stop the threshold monitoring
    - UPDATE:PATH               update the threshold data from the file

- CHARACTER
    - #: ignore a line
    - ''': ignore specific range
'''

<threshold>
{

    "COMMAND": {

        "CMD_NOTIFY_WARN": "GUIDER cli upstream:notify:WARN",
        "CMD_TOP": "GUIDER top -o /tmp/guider_top_EVTNAME_EVTTIME.out -R 10 -Y c:15",
        "CMD_FTOP": "GUIDER ftop -o /tmp/guider_top_EVTNAME_EVTTIME.out -a -R 1 -Y c:15",
        "CMD_FTOP_PROC": "GUIDER ftop -o /tmp/guider_top_EVTNAME_EVTTIME.out -a -g EVTPID -R 1 -Y c:15",
        "CMD_MTOP": "GUIDER mtop -o /tmp/guider_top_EVTNAME_EVTTIME.out -R 3 -Y c:15",
        "CMD_FUNCREC": "GUIDER funcrec -s /tmp/guider_funcrec_EVTNAME_EVTTIME.dat -R 3",
        "CMD_DISKTOP": "GUIDER disktop -R 3 -a -o /tmp/guider_block_EVTNAME_EVTTIME.out -Y c:15",
        "CMD_DISKTOP_TOTAL": "GUIDER disktop -e T -R 3 -a -o /tmp/block_EVTNAME_EVTTIME.out -Y c:15",
        "CMD_NETTOP": "GUIDER ntop -R 3 -o /tmp/guider_task_EVTNAME_EVTTIME.out -Y c:15",
        "CMD_TTOP_PROC": "GUIDER ttop -g EVTPID -P -R 3 -o /tmp/guider_task_EVTNAME_EVTTIME.out -Y c:15",
        "CMD_TTOP_CTX": "GUIDER ttop -S C:1 -R 2 -o /tmp/guider_task_EVTNAME_EVTTIME.out -Y c:15",
        "CMD_TTOP_UTOP_ALL": "GUIDER ttop -g EVTPID -P -S c:1 -e E -R 1 -Q -c \"GUIDER utop -g PID -H -o /tmp/guider_utop_EVTNAME_EVTTIME_COMM_PID.out -R 5 -q LAZYCACHE\"",
        "CMD_TTOP_UTOP_2": "GUIDER ttop -g EVTPID -P -S c:1 -e E -R 1 -Q -q NRTOPRANK:2 -c \"GUIDER utop -g PID -H -o /tmp/guider_utop_EVTNAME_EVTTIME_COMM_PID.out -R 5 -q LAZYCACHE\"",
        "CMD_UTOP": "GUIDER utop -g EVTPID -H -o /tmp/guider_utop_EVTNAME_EVTTIME_COMM_PID.out -R 3",
        "CMD_LEAK_1G": "GUIDER leaktrace -g EVTPID -T /tmp/libleaktracer.so -o /tmp/guider_leak_EVTNAME_EVTTIME.out -c 1g",
        "CMD_LEAK_+200M": "GUIDER leaktrace -g EVTPID -T /tmp/libleaktracer.so -o /tmp/guider_leak_EVTNAME_EVTTIME.out -c +200m"

    },

    "cpu": {

        "SYSTEM": [
            {
                "apply": "true",
                "total": 95,
                "interval": 5,
                "after": "60s",
                "taskmon": "true",
                "oneshot": "true",
                "refresh": 10,
                "command": ["SAVE:5s"],
                "message": "system CPU usage is high",
                "explain": "monitor system CPU usage with uptime 60s condition"
            },

            {
                "apply": "false",
                "total": 99,
                "interval": 5,
                "type": "min",
                "perm": "root",
                "lock": "true",
                "skip": 5,
                "max": 5,
                "command": ["CMD_TOP", "CMD_FUNCREC"],
                "message": "system CPU usage is critical",
                "explain": "monitor the minimum CPU usage for system"
            },

            {
                "apply": "false",
                "total": 90,
                "interval": 3,
                "perm": "root",
                "signal": "3:SIGINT",
                "command": ["simpleperf record -g -o /data/perf.dat"],
                "message": "system CPU usage is high",
                "explain": "send SIGINT to the command process after 3 seconds"
            },

            {
                "apply": "false",
                "total": 90,
                "interval": 1,
                "lcommand": ["SAVE"],
                "message": "system CPU usage is high",
                "explain": "save monitoring results when the event is finished"
            }

        ],

        "TASK": [
            {
                "apply": "false",
                "total": 95,
                "interval": 5,
                "oneshot": "true",
                "refresh": 30,
                "lock": "true",
                "perm": "root",
                "except": ["b.out"],
                "command": ["CMD_TTOP_PROC"],
                "explain": "monitor CPU usage for all processes except for b.out processes"
            }
        ],

        "yes*": [
            {
                "apply": "false",
                "total": 98,
                "interval": 3,
                "perm": "root",
                "lock": "true",
                "oneshot": "true",
                "command": ["CMD_TTOP_UTOP_2"],
                "explain": "monitor CPU usage for specific processes having name starts with yes"
            }
        ]

    },

    "gpu": {

        "DEVICE": {
            "apply": "false",
            "total": 95,
            "interval": 10,
            "taskmon": "true",
            "command": ["SAVE:5s"],
            "message": "system GPU usage is high",
            "explain": "monitor system GPU usage for all devices"
        }

    },

    "mem": {

        "SYSTEM": [
            {
                "apply": "true",
                "available": 100,
                "goneshot": "true",
                "command": ["SAVEMEM"],
                "message": "system available memory is low",
                "explain": "monitor system available memory"
            },

            {
                "apply": "false",
                "free": 100,
                #"pgRclmBg": 102400,
                #"pgRclmFg": 1024,
                "oneshot": "true",
                "refresh": 10,
                "command": ["SAVERAW"],
                "message": "system free memory is low",
                "explain": "monitor system free memory"
            }
        ],

        "TASK": {
            "apply": "false",
            "rss": 800,
            "perm": "root",
            "oneshot": "true",
            "lock": "true",
            "except": ["b.out"],
            "command": ["CMD_LEAK_1G"],
            "explain": "monitor RSS for all processes"
        },

        "a.out*": {
            "apply": "false",
            "rss": 10,
            "interval": 3,
            "perm": "root",
            "oneshot": "true",
            "lock": "true",
            "command": ["CMD_LEAK_+200M"],
            "explain": "monitor RSS for all processes"
        }

    },

    "gpumem": {

        "SYSTEM": {
            "apply": "false",
            "total": 2048,
            "oneshot": "true",
            "command": ["CMD_MTOP"],
            "message": "GPU memory usage is high",
            "explain": "monitor system GPU memory"
        },

        "TASK": {
            "apply": "false",
            "size": 310,
            "perm": "root",
            "oneshot": "true",
            "except": ["b.out"],
            "command": ["SAVE:3s"],
            "message": "GPU memory usage for the specific process is high",
            "explain": "monitor GPU-dedicated memory for all processes"
        },

        "weston": {
            "apply": "false",
            "size": 500,
            "perm": "root",
            "oneshot": "true",
            "command": ["SAVE:3s"],
            "message": "GPU memory usage for the specific process is high",
            "explain": "monitor GPU-dedicated memory for specific processes having name weston"
        }

    },

    "swap": {

        "SYSTEM": {
            "apply": "false",
            "usagePer": 95,
            "interval": 5,
            "perm": "root",
            "command": ["CMD_MTOP"],
            "message": "system SWAP usage is high",
            "explain": "monitor system swap usage"
        },

        "TASK": {
            "apply": "false",
            "swap": 100,
            "except": ["b.out"],
            "command": ["CMD_MTOP"],
            "explain": "monitor swapped out memory for all processes"
        }

    },

    "block": {

        "SYSTEM": {
            "apply": "false",
            "ioWait": 10,
            "interval": 5,
            "perm": "root",
            "command": ["SAVEBLOCK", "CMD_DISKTOP"],
            "message": "system I/O is heavy",
            "explain": "monitor system block time"
        },

        "TASK": {
            "apply": "false",
            "read": "500M",
            "write": "100M",
            "perm": "root",
            "interval": 2,
            "except": ["b.out"],
            "command": ["CMD_DISKTOP_TOTAL"],
            "explain": "monitor block I/O usage for all processes"
        },

        "a.out*": {
            "apply": "false",
            "read": "500M",
            "write": "100M",
            "interval": 2,
            "perm": "root",
            "command": ["CMD_DISKTOP_TOTAL"],
            "explain": "monitor block I/O usage for specific processes having name starts with a.out"
        }

    },

    "storage": {

        "SYSTEM": {
            "apply": "false",
            "usagePer": 95,
            "interval": 3,
            "oneshot": "true",
            "perm": "root",
            "command": ["CMD_DISKTOP"],
            "message": "system storage usage is high",
            "explain": "monitor system storage usage"
        },

        "DEVICE": {
            "apply": "false",
            "usagePer": 99,
            "free": 100,
            "interval": 5,
            "except": ["/dev/loop*"],
            "perm": "root",
            "oneshot": "true",
            "command": ["CMD_DISKTOP"],
            "explain": "monitor storage usage for all devices"
        },

        "/dev/sda2": {
            "apply": "false",
            "usagePer": 99,
            "free": 100,
            "interval": 3,
            "perm": "root",
            "oneshot": "true",
            "command": ["CMD_DISKTOP"],
            "explain": "monitor storage usage for the specific device"
        }

    },

    "net": {

        "SYSTEM": {
            "apply": "false",
            "inbound": "1G",
            "outbound": "500M",
            "interval": 3,
            "perm": "root",
            "command": ["CMD_NETTOP"],
            "message": "system network usage is high",
            "explain": "monitor system network usage"
        },

        "DEVICE": {
            "apply": "false",
            "recv": "1G",
            "trans": "500M",
            "interval": 3,
            "except": ["lo"],
            "perm": "root",
            "command": ["CMD_NETTOP"],
            "explain": "monitor network usage for all devices"
        },

        "enp7s0": {
            "apply": "false",
            "recv": "1G",
            "trans": "1G",
            "perm": "root",
            "interval": 3,
            "command": ["CMD_NETTOP"],
            "explain": "monitor network usage for the specific device"
        }

    },

    "load": {

        "SYSTEM": {
            "apply": "false",
            "load1m": 8,
            "command": ["SAVE"],
            "message": "system loadavg value is high",
            "explain": "monitor system load"
        }

    },

    "fd": {

        "SYSTEM": {
            "apply": "false",
            "curFd": 90000,
            "perm": "root",
            "oneshot": "true",
            "command": ["CMD_FTOP"],
            "explain": "monitor file descriptors of the system"
        },

        "TASK": {
            "apply": "false",
            "fdSize": 10000,
            "perm": "root",
            "oneshot": "true",
            "refresh": 100,
            "command": ["CMD_FTOP_PROC"],
            "except": ["*.out", "screen"],
            "explain": "monitor file descriptors of the all processes"
        },

        "a.out": {
            "apply": "false",
            "fdSize": 10000,
            "perm": "root",
            "oneshot": "true",
            "command": ["CMD_FTOP_PROC"],
            "explain": "monitor file descriptors of the specific processes"
        }

    },

    "sock": {

        "SYSTEM": {
            "apply": "false",
            "interval": 5,
            "nrUDPSock": 10000,
            "nrTCPSock": 10000,
            "nrTCPConn": 10000,
            "nrUDSSock": 10000,
            "perm": "root",
            "oneshot": "true",
            "command": ["CMD_FTOP"],
            "explain": "monitor all sockets of the system"
        }

    },

    "file": {

        "/tmp/boot_done": {
            "apply": "false",
            "none": "true",
            "perm": "root",
            "oneshot": "true",
            "after": "1m",
            "command": ["SAVE"],
            "explain": "monitor specific files of the system"
        },

        "/tmp/PEACE*": {
            "apply": "false",
            "exist": "true",
            #"big": "1M",
            #"less": "1K",
            "perm": "root",
            "oneshot": "true",
            "command": ["SAVE"],
            "explain": "monitor specific files of the system"
        },

        "/tmp/TESTDIR": {
            "apply": "false",
            "bigCnt": 4,
            #"lessCnt": 10,
            #"eqCnt": 8,
            "oneshot": "true",
            "command": ["SAVE"],
            "explain": "monitor the specific directory of the system"
        }

    },

    "task": {

        "SYSTEM": [
            {
                "apply": "false",
                "nrCtx": 50000,
                "command": ["CMD_TTOP_CTX"],
                "explain": "monitor context switching of all tasks"
            },

            {
                "apply": "false",
                "new": 1,
                "die": 1,
                "command": ["SAVE"],
                "explain": "monitor lifecycle of all tasks"
            },

            {
                "apply": "false",
                "abnormal": 1,
                "interval": 5,
                "command": ["SAVE"],
                "explain": "monitor abnormal status of all tasks"
            }
        ],

        "TASK": {
            "apply": "false",
            "except": ["b.out", "kworker*"],
            "nrCtx": 5000,
            "interval": 3,
            "command": ["SAVE:3s"],
            "explain": "monitor context switching of all tasks except for specific tasks"
        },

        "yes*": [
            {
                "apply": "false",
                "new": 1,
                "die": 1,
                "interval": 3,
                "command": ["SAVE"],
                "explain": "monitor lifecycle of specific tasks having name starts with yes"
            },

            {
                "apply": "false",
                "abnormal": 1,
                "abnormalCond": "Dt",
                "interval": 3,
                "command": ["SAVE"],
                "explain": "monitor abnormal status Dt of specific tasks having name starts with yes"
            },

            {
                "apply": "false",
                "bigCnt": 1,
                #"lessCnt": 3,
                #"eqCnt": 3,
                "interval": 3,
                "command": ["SAVE"],
                "explain": "monitor count of specific tasks having name starts with yes"
            }
        ]

    },

    "log": {

        "DLT": [
            {
                "apply": "false",
                "filter": "*critical*+oops",
                "oneshot": "true",
                "command": ["SAVE:3s"],
                "caution": "the info log for this event can recreate the event",
                "explain": "monitor DLT logs"
            }
        ],

        "TRACE": [
            {
                "apply": "false",
                "filter": "*ASDF*+*oops*",
                "oneshot": "true",
                "command": ["SAVE:3s"],
                "explain": "monitor FTRACE logs"
            }
        ],

        "KERNEL": [
            {
                "apply": "false",
                "filter": "*critical*+*oops*",
                "oneshot": "true",
                "command": ["SAVE:3s"],
                "caution": "the info log for this event can recreate the event",
                "explain": "monitor kernel logs"
            }
        ],

        "LOGCAT": [
            {
                "apply": "false",
                "filter": "*ASDF*+oops",
                "oneshot": "true",
                "command": ["SAVE:3s"],
                "caution": "the info log for this event can recreate the event",
                "explain": "monitor android logs"
            }
        ],

        "JOURNAL": [
            {
                "apply": "false",
                "filter": "*critical*+*oops*",
                "oneshot": "true",
                "command": ["SAVE:3s"],
                "caution": "the info log for this event can recreate the event",
                "explain": "monitor systemd journal logs"
            }
        ],

        "SYSLOG": [
            {
                "apply": "false",
                "filter": "*critical*+oops",
                "oneshot": "true",
                "perm": "true",
                "command": ["SAVE:3s"],
                "caution": "the info log for this event can recreate the event",
                "explain": "monitor syslog logs"
            }
        ]

    },

    "func": {

        "NATIVE": [
            {
                "apply": "false",
                "thread": "a.out",
                "group": "true",
                "filter": "write*+read",
                "perm": "true",
                "oneshot": "true",
                "command": ["SAVE:3s"],
                "explain": "monitor native function calls of specific tasks"
            }
        ],

        "SYSCALL": [
            {
                "apply": "false",
                "thread": "a.out",
                "group": "false",
                "filter": "write*+read",
                "oneshot": "true",
                "perm": "true",
                "command": ["SAVE:3s"],
                "explain": "monitor syscalls of specific tasks"
            }
        ],

        "PYTHON": [
            {
                "apply": "false",
                "thread": "iotop",
                "main": "true",
                "filter": "write*+read",
                "perm": "true",
                "oneshot": "true",
                "command": ["SAVE:3s"],
                "explain": "monitor python method calls of specific tasks"
            }
        ],

        "DBUS": [
            {
                "apply": "false",
                "thread": "dbus-daemon",
                "filter": "*TestInterface*+*OnEmitSignal*",
                "perm": "true",
                "oneshot": "true",
                "command": ["SAVE:3s"],
                "explain": "monitor D-Bus messages"
            }
        ],

        "SIGNAL": [
            {
                "apply": "false",
                "thread": "a.out",
                "filter": "SIGINT+SIGSTOP",
                "perm": "true",
                "oneshot": "true",
                "command": ["SAVE:3s"],
                "explain": "save signals of specific tasks"
            }
        ]

    },

    "psi": {

        "cpu": [
            {
                "apply": "false",
                "some-avg10": 30,
                "some-avg60": 30,
                "some-avg300": 30,
                "some-diff": 30,
                "type": "min",
                "interval": 5,
                "oneshot": "true",
                "refresh": 100,
                "command": ["SAVE:3s"],
                "explain": "monitor PSI cpu stats"
            }
        ],

        "memory": [
            {
                "apply": "false",
                "some-avg10": 30,
                "full-avg60": 30,
                "full-avg300": 30,
                "some-diff": 30,
                "type": "min",
                "interval": 5,
                "oneshot": "true",
                "refresh": 100,
                "command": ["SAVE:3s"],
                "explain": "monitor PSI memory stats"
            }
        ],

        "io": [
            {
                "apply": "false",
                "some-avg10": 30,
                "full-avg60": 30,
                "full-avg300": 30,
                "some-diff": 30,
                "type": "min",
                "interval": 5,
                "oneshot": "true",
                "refresh": 100,
                "command": ["SAVE:3s"],
                "explain": "monitor PSI I/O stats"
            }
        ]

    },

    "cgroup": {

        "/": [
            {
                "apply": "false",
                "interval": 3,
                "taskmon": "true",
                "cpu": 400,
                "throttle": 100,
                "command": ["SAVE"],
                "explain": "monitor cgroup CPU usage"
            },

            {
                "apply": "false",
                "interval": 3,
                "taskmon": "true",
                "memory": 300,
                "read": 600,
                "write": 500,
                "command": ["SAVE"],
                "explain": "monitor cgroup memory usage"
            },

            {
                "apply": "false",
                "interval": 2,
                "taskmon": "true",
                "cpuDelay": 90,
                "memDelay": 90,
                "ioDelay": 90,
                "command": ["SAVE"],
                "explain": "monitor cgroup delay"
            }
        ]
    }

}



'''
[ Server Description ]

- COMMAND: shortcut for commands

- INIT: commands executed remotely when connected
    - apply:    switch flag
    - perm:     requirement for permission
    - interval: interval for repeatation (TBD)
    - duration: condition for duration
    - command:  command set
    - oneshot:  oneshot flag (TBD)
    - explain:  description

- EVENT: event handlers
    - name:    event name
    - apply:   switch flag
    - command: commands executed when the event occur
    - handler: functions called when the event occur

- CHARACTER
    - #: ignore a line
    - ''': ignore specific range
'''

<server>
{
    "COMMAND": {

        "CMD_RTOP": "GUIDER rtop -Q -i 3 -C",
        "CMD_DOWN": "download:/tmp/*@./backup/",
        "CMD_MAIL": "mail -s \"Warning Report\" master@github.com"

    },

    "INIT": [

        {
            "apply": "false",
            "perm": "none",
            "oneshot": "true",
            "duration": "10s",
            "command": ["CMD_RTOP"],
            "explain": "print system stat in JSON format from the new node to stdout"
        },

        {
            "apply": "false",
            "perm": "none",
            "oneshot": "true",
            "command": ["CMD_RTOP->cat"],
            "explain": "deliver system stat in JSON format from the new node to the cat process in local machine through pipe"
        },

        {
            "apply": "false",
            "perm": "true",
            "oneshot": "false",
            "interval": "10s",
            "command": ["CMD_DOWN"],
            "explain": "download specific files from the new node every 10 seconds"
        }

    ],

    "EVENT": [

        {
            "name": "TEST",
            "apply": "false",
            "command": ["ls -lha", "CMD_MAIL"],
            "handler": ["./test.py:test"],
            "explain": "make a snapshot image for system"
        }

    ]
}



'''
[ Auto Command Description ]

- CHARACTER
    - #: ignore a line
    - ''': ignore specific range
'''

<command>
{
    "apply": "false",
    "list": [
        "GUIDER list",
        "ls -lha"
    ]
}
